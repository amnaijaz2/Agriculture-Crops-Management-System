{% extends "base.html" %}
{% block title %}Order #{{ order.id }}{% endblock %}
{% block content %}
<div class="page-header animate-fade-in">
    <nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="{% url 'orders:order_list' %}">Orders</a></li><li class="breadcrumb-item active">Order #{{ order.id }}</li></ol></nav>
    <div class="d-flex justify-content-between align-items-center">
        <h2>Order #{{ order.id }}</h2>
        {% if user.role == 'ADMIN' or user.role == 'BROKER' or user.role == 'FARMER' %}
        <a href="{% url 'orders:order_status_update' order.pk %}" class="btn btn-primary">Update Status</a>
        {% endif %}
    </div>
</div>
<div class="card p-4 animate-slide-up">
    <div class="row">
        <div class="col-md-6">
            <p><strong>Crop:</strong> {{ order.crop.name }}</p>
            <p><strong>Quantity:</strong> {{ order.quantity }} {{ order.crop.unit }}</p>
            <p><strong>Unit Price:</strong> ${{ order.crop.price }}</p>
            <p><strong>Total:</strong> ${{ order.total_amount|floatformat:2 }}</p>
        </div>
        <div class="col-md-6">
            <p><strong>Client:</strong> {{ order.client.username }}</p>
            <p><strong>Status:</strong> <span class="badge bg-secondary">{{ order.get_status_display }}</span></p>
            <p><strong>Shipping:</strong> {{ order.shipping_address }}</p>
            <p><strong>Placed:</strong> {{ order.created_at|date:"M d, Y H:i" }}</p>
        </div>
    </div>
    {% if order.notes %}<hr><p><strong>Notes:</strong> {{ order.notes }}</p>{% endif %}
</div>
{% endblock %}
