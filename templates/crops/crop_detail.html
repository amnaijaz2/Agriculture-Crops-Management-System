{% extends "base.html" %}
{% block title %}{{ crop.name }} - Crops{% endblock %}
{% block content %}
<div class="page-header animate-fade-in">
    <nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="{% url 'crops:crop_list' %}">Crops</a></li><li class="breadcrumb-item active">{{ crop.name }}</li></ol></nav>
    <div class="d-flex justify-content-between align-items-center">
        <h2>{{ crop.name }}</h2>
        {% if user.role == 'FARMER' and crop.farmer == user or user.role == 'ADMIN' %}
        <div>
            <a href="{% url 'crops:crop_update' crop.pk %}" class="btn btn-primary">Edit</a>
            <a href="{% url 'crops:crop_delete' crop.pk %}" class="btn btn-outline-danger">Delete</a>
        </div>
        {% endif %}
    </div>
</div>
<div class="card p-4 animate-slide-up">
    <div class="row">
        <div class="col-md-6">
            <p><strong>Type:</strong> {{ crop.get_crop_type_display }}</p>
            <p><strong>Quantity:</strong> {{ crop.quantity }} {{ crop.unit }}</p>
            <p><strong>Price:</strong> ${{ crop.price }} per {{ crop.unit }}</p>
            <p><strong>Farmer:</strong> {{ crop.farmer.username }}</p>
        </div>
        <div class="col-md-6">
            <p><strong>Location:</strong> {{ crop.location }}</p>
            <p><strong>Status:</strong> <span class="badge bg-success">{{ crop.get_status_display }}</span></p>
            {% if crop.description %}<p><strong>Description:</strong> {{ crop.description }}</p>{% endif %}
        </div>
    </div>
    {% if user.role == 'CLIENT' or user.role == 'BROKER' %}
    {% if crop.status == 'AVAILABLE' and crop.quantity > 0 %}
    <hr>
    <a href="{% url 'orders:order_create' %}?crop={{ crop.pk }}" class="btn btn-success"><i class="bi bi-cart-plus me-2"></i>Place Order</a>
    {% endif %}
    {% endif %}
</div>
{% endblock %}
